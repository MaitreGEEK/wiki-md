<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <title>{{folder_name}} - Wiki-MD</title>
    <link rel="stylesheet" href="/public/styles.css">
</head>
<body>
    <header>
        <nav>
            <a href="/" class="logo">ğŸ“š Wiki-MD</a>
            <div class="nav-links">
                <a href="/articles">Articles</a>
                {{#if can_edit}}
                    <a href="/folders">Dossiers</a>
                {{/if}}
            </div>
        </nav>
    </header>

    <div class="container">
        <!-- Breadcrumb -->
        <div style="margin-bottom: 1rem; color: var(--text-dim); font-size: 0.9rem;">
            <a href="/" style="color: var(--text-dim);">ğŸ  Accueil</a> 
            <span> / </span>
            <a href="/folders" style="color: var(--text-dim);">ğŸ“ Dossiers</a>
            <span> / </span>
            <span>{{folder_name}}</span>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h1>ğŸ“ {{folder_name}}</h1>
            {{#if can_edit}}
                <a href="/folder/{{folder_slug}}?edit=true" class="btn-edit" style="text-decoration: none;">
                    âš™ï¸ Ã‰diter le dossier
                </a>
            {{/if}}
        </div>

        {{#if folder_description}}
            <p style="color: var(--text-dim); margin-bottom: 2rem;">{{folder_description}}</p>
        {{/if}}
        
        <div id="articles-list" class="grid grid-2"></div>
    </div>

    <script>
        const articles = {{articles_json}};
        
        const container = document.getElementById('articles-list');
        
        if (articles.length === 0) {
            container.innerHTML = '<p style="color: var(--text-dim); text-align: center;">Aucun article dans ce dossier.</p>';
        } else {
            container.innerHTML = articles.map(article => `
                <div class="card" onclick="location.href='/article/${article.slug}'" style="cursor: pointer;">
                    ${article.image ? `<img src="${article.image}" alt="${article.title}" style="width:100%; border-radius: 8px; margin-bottom: 1rem;">` : ''}
                    <h3>${article.title}</h3>
                    <p class="article-meta">${article.description || ''}</p>
                    <p class="article-meta">ğŸ“… ${new Date(article.created_at).toLocaleDateString('fr-FR')}</p>
                </div>
            `).join('');
        }
    </script>
</body>
</html>
