<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="robots" content="noindex">
	<title>Connexion - Wiki-MD</title>
	<link rel="stylesheet" href="/public/styles.css">
</head>
<body>
	<div class="login-container">
		<div class="login-box">
			<h1 style="text-align: center; margin-bottom: 2rem;">ðŸ“š Wiki-MD</h1>
			
			{{#if error}}
				<div class="error">{{error}}</div>
			{{/if}}
			
			<form onsubmit="login(event)" class="card">
				<div class="form-group">
					<label for="username">Nom d'utilisateur</label>
					<input type="text" id="username" required>
				</div>
				
				<div class="form-group">
					<label for="password">Mot de passe</label>
					<input type="password" id="password" required>
				</div>
				
				<button type="submit">Connexion</button>
			</form>
		</div>
	</div>

	<script>
		async function login(event) {
			event.preventDefault();
			
			const username = document.getElementById('username').value;
			const password = document.getElementById('password').value;
			
			const response = await fetch('/api/login', {
				method: 'POST',
				headers: { 'Content-Type': 'application/json' },
				body: JSON.stringify({ username, password })
			});
			
			if (response.ok) {
				location.href = '/';
			} else {
				alert('Identifiants invalides');
			}
		}
	</script>
</body>
</html>
